---
id: get-portfolio-risk
title: "Get portfolio-wide risk analysis"
description: "Analyzes liquidation risk across **all lending positions** for an address."
sidebar_label: "Get portfolio-wide risk analysis"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "get api-method"
info_path: docs/api/positions/kixago-defi-aggregator-api
custom_edit_url: null
---

import MethodEndpoint from "@theme/ApiExplorer/MethodEndpoint";
import ParamsDetails from "@theme/ParamsDetails";
import RequestSchema from "@theme/RequestSchema";
import StatusCodes from "@theme/StatusCodes";
import OperationTabs from "@theme/OperationTabs";
import TabItem from "@theme/TabItem";
import Heading from "@theme/Heading";

<Heading
  as={"h1"}
  className={"openapi__heading"}
  children={"Get portfolio-wide risk analysis"}
>
</Heading>

<MethodEndpoint
  method={"get"}
  path={"/risk/portfolio"}
  context={"endpoint"}
>
  
</MethodEndpoint>



Analyzes liquidation risk across **all lending positions** for an address.

## What You Get

- Total collateral and debt across all protocols
- Weighted health factor
- Liquidation risk score (0-1, where 1 = immediate risk)
- Number of positions at risk
- Recommended actions to improve health

## Use Cases

- Build liquidation alert systems
- Portfolio health dashboards
- Risk management tools
- Automated rebalancing triggers

## Risk Scoring

| Health Factor | Risk Score | Interpretation |
|--------------|-----------|----------------|
| > 2.0 | 0.1 | Low risk |
| 1.5 - 2.0 | 0.3 | Medium risk |
| 1.0 - 1.5 | 0.7 | High risk |
| &lt; 1.0 | 1.0 | Immediate liquidation risk |


<Heading
  id={"request"}
  as={"h2"}
  className={"openapi-tabs__heading"}
  children={"Request"}
>
</Heading>

<ParamsDetails
  parameters={[{"name":"address","in":"query","required":true,"description":"Wallet address to analyze","schema":{"type":"string","pattern":"^0x[a-fA-F0-9]{40}$"},"example":"0xf0bb20865277abd641a307ece5ee04e79073416c"}]}
>
  
</ParamsDetails>

<RequestSchema
  title={"Body"}
  body={undefined}
>
  
</RequestSchema>

<StatusCodes
  id={undefined}
  label={undefined}
  responses={{"200":{"description":"Portfolio risk analysis","content":{"application/json":{"schema":{"type":"object","required":["success","data","timestamp"],"properties":{"success":{"type":"boolean","example":true},"data":{"type":"object","description":"Aggregated risk analysis across all positions","required":["total_collateral_usd","total_borrowed_usd","weighted_ltv","weighted_health_factor","liquidation_risk_score","positions_at_risk","positions_near_risk","last_updated"],"properties":{"total_collateral_usd":{"type":"number","format":"double","description":"Sum of all collateral across all positions","example":100000},"total_borrowed_usd":{"type":"number","format":"double","description":"Sum of all debt across all positions","example":40000},"weighted_ltv":{"type":"number","format":"double","description":"Portfolio-wide LTV","example":0.4},"weighted_health_factor":{"type":"number","format":"double","description":"Average health factor across all positions","example":2.5},"liquidation_risk_score":{"type":"number","format":"double","description":"Overall risk score (0-1)","example":0.1},"positions_at_risk":{"type":"integer","description":"Number of positions with health factor < 1.0","example":0},"positions_near_risk":{"type":"integer","description":"Number of positions with health factor < 1.5","example":0},"largest_risk":{"allOf":[{"type":"object","description":"A normalized lending position across any protocol","required":["protocol","protocol_version","chain","user_address","collateral_details","borrowed_details","collateral_usd","borrowed_usd","ltv_current","ltv_liquidation_threshold","health_factor","is_at_risk","time_to_liquidation","last_updated"],"properties":{"protocol":{"type":"string","description":"Protocol name","enum":["aave","compound","makerdao"],"example":"aave"},"protocol_version":{"type":"string","description":"Protocol version","example":"v3"},"chain":{"type":"string","description":"Blockchain network","enum":["ethereum","polygon","arbitrum","base"],"example":"base"},"user_address":{"type":"string","description":"User's wallet address","example":"0xf0bb20865277abd641a307ece5ee04e79073416c"},"collateral_details":{"type":"array","description":"List of collateral assets","items":{"type":"object","description":"Details for a single token (collateral or borrowed)","required":["token","amount","usd_value","apy","token_address"],"properties":{"token":{"type":"string","description":"Token symbol","example":"WETH"},"amount":{"type":"number","format":"double","description":"Raw token amount (in token's native decimals)","example":1.5},"usd_value":{"type":"number","format":"double","description":"Current USD value of this position","example":4500},"apy":{"type":"number","format":"double","description":"Annual Percentage Yield (for collateral) or Rate (for borrows)","example":2.3},"token_address":{"type":"string","description":"Contract address of the token","example":"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2"}},"title":"TokenDetail"}},"borrowed_details":{"type":"array","description":"List of borrowed assets","items":{"type":"object","description":"Details for a single token (collateral or borrowed)","required":["token","amount","usd_value","apy","token_address"],"properties":{"token":{"type":"string","description":"Token symbol","example":"WETH"},"amount":{"type":"number","format":"double","description":"Raw token amount (in token's native decimals)","example":1.5},"usd_value":{"type":"number","format":"double","description":"Current USD value of this position","example":4500},"apy":{"type":"number","format":"double","description":"Annual Percentage Yield (for collateral) or Rate (for borrows)","example":2.3},"token_address":{"type":"string","description":"Contract address of the token","example":"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2"}},"title":"TokenDetail"}},"collateral_usd":{"type":"number","format":"double","description":"Total USD value of all collateral","example":4500},"borrowed_usd":{"type":"number","format":"double","description":"Total USD value of all borrows","example":2000},"ltv_current":{"type":"number","format":"double","description":"Current Loan-to-Value ratio","example":0.44},"ltv_liquidation_threshold":{"type":"number","format":"double","description":"LTV at which liquidation occurs","example":0.8},"health_factor":{"type":"number","format":"double","description":"Health factor representing liquidation risk.\n- > 1.0 = Safe\n- < 1.0 = At risk of liquidation\n","example":1.8},"is_at_risk":{"type":"boolean","description":"True if position is at immediate liquidation risk","example":false},"time_to_liquidation":{"type":"string","description":"Estimated time until liquidation (if at risk)","example":"No immediate risk"},"last_updated":{"type":"string","format":"date-time","description":"Timestamp of last update","example":"2025-10-15T14:30:00Z"}},"title":"LendingPosition"}],"nullable":true,"description":"Position with lowest health factor"},"recommended_actions":{"type":"array","items":{"type":"string"},"description":"Suggested actions to improve portfolio health","example":[]},"last_updated":{"type":"string","format":"date-time","example":"2025-10-15T14:30:00Z"}},"title":"PortfolioRisk"},"timestamp":{"type":"string","format":"date-time","example":"2025-10-15T14:30:00Z"}},"title":"PortfolioRiskResponse"},"examples":{"healthyPortfolio":{"summary":"Healthy portfolio with low risk","value":{"success":true,"data":{"total_collateral_usd":100000,"total_borrowed_usd":40000,"weighted_ltv":0.4,"weighted_health_factor":2.5,"liquidation_risk_score":0.1,"positions_at_risk":0,"positions_near_risk":0,"largest_risk":null,"recommended_actions":[],"last_updated":"2025-10-15T14:30:00Z"},"timestamp":"2025-10-15T14:30:00Z"}},"atRiskPortfolio":{"summary":"Portfolio with high liquidation risk","value":{"success":true,"data":{"total_collateral_usd":50000,"total_borrowed_usd":42000,"weighted_ltv":0.84,"weighted_health_factor":1.2,"liquidation_risk_score":0.7,"positions_at_risk":0,"positions_near_risk":2,"largest_risk":{"protocol":"aave","protocol_version":"v3","chain":"ethereum","health_factor":1.2,"collateral_usd":30000,"borrowed_usd":25000},"recommended_actions":["HIGH RISK: Consider depositing more collateral or paying down borrows"],"last_updated":"2025-10-15T14:30:00Z"},"timestamp":"2025-10-15T14:30:00Z"}}}}}},"400":{"description":"Invalid request","content":{"application/json":{"schema":{"type":"object","required":["success","error","timestamp"],"properties":{"success":{"type":"boolean","example":false},"error":{"type":"string","description":"Human-readable error message","example":"address parameter required"},"timestamp":{"type":"string","format":"date-time","example":"2025-10-15T14:30:00Z"}},"title":"ErrorResponse"}}}}}}
>
  
</StatusCodes>


      