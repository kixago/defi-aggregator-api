# Portfolio Dashboard Example

This is a full example demonstrating how to use the Kixago API to build a real-time multi-chain portfolio dashboard in one file.

---

```jsx
import React, { useEffect, useState } from "react";

// Mock: replace with your API endpoint if needed
const API_BASE = "/api/v1/lending/positions";

export default function PortfolioDashboard({ address }) {
  const [positions, setPositions] = useState([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  // Fetch portfolio positions
  const fetchPositions = async () => {
    try {
      setLoading(true);
      const res = await fetch(`${API_BASE}?address=${address}&include_all_chains=true`);
      if (!res.ok) throw new Error(`HTTP ${res.status}`);
      const data = await res.json();
      setPositions(data.positions);
      setError(null);
    } catch (err) {
      setError(err.message);
      setPositions([]);
    } finally {
      setLoading(false);
    }
  };

  // Initial fetch + polling every 15s
  useEffect(() => {
    fetchPositions();
    const interval = setInterval(fetchPositions, 15000);
    return () => clearInterval(interval);
  }, [address]);

  if (loading) return <p>Loading portfolio...</p>;
  if (error) return <p>Error: {error}</p>;

  return (
    <div style={{ padding: "1rem", fontFamily: "Arial, sans-serif" }}>
      <h2>Portfolio Dashboard</h2>
      <table style={{ width: "100%", borderCollapse: "collapse" }}>
        <thead>
          <tr>
            <th style={{ borderBottom: "1px solid #ccc" }}>Protocol</th>
            <th style={{ borderBottom: "1px solid #ccc" }}>Chain</th>
            <th style={{ borderBottom: "1px solid #ccc" }}>Collateral</th>
            <th style={{ borderBottom: "1px solid #ccc" }}>Borrowed</th>
            <th style={{ borderBottom: "1px solid #ccc" }}>Health Factor</th>
            <th style={{ borderBottom: "1px solid #ccc" }}>Liquidation Risk</th>
          </tr>
        </thead>
        <tbody>
          {positions.map((p, idx) => (
            <tr key={idx} style={{ borderBottom: "1px solid #eee" }}>
              <td>{p.protocol}</td>
              <td>{p.chain}</td>
              <td>
                {p.collateral.amount} {p.collateral.token} (${p.collateral.usd_value})
              </td>
              <td>
                {p.borrowed.amount} {p.borrowed.token} (${p.borrowed.usd_value})
              </td>
              <td>{p.health_factor}</td>
              <td>{p.is_at_risk ? "⚠️ At Risk" : "✅ Safe"}</td>
            </tr>
          ))}
        </tbody>
      </table>
      <div style={{ marginTop: "1rem" }}>
        <strong>Tips:</strong>
        <ul>
          <li>Sort by <code>health_factor</code> to find risky positions.</li>
          <li>Highlight high-yield positions with <code>real_apy</code> from opportunities API.</li>
          <li>Use multi-chain support to combine Ethereum, Polygon, Arbitrum data.</li>
        </ul>
      </div>
    </div>
  );
}
```

---

**Usage:**

```jsx
<PortfolioDashboard address="0x1234..." />
```

This is a self-contained dashboard example you can edit or drop directly into your React project. It supports:

* Real-time updates every 15 seconds
* Multi-chain aggregation
* Risk indicators
* Easy table display for quick portfolio insights
